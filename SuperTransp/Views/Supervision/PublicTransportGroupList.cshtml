@model List<SuperTransp.Models.PublicTransportGroupViewModel>
@{
	Layout = "";
}
<!DOCTYPE HTML>
<html>

<head>
	<title>Líneas Registradas</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="~/assets/css/main.css" />
	<noscript><link rel="stylesheet" href="~/assets/css/noscript.css" /></noscript>

	@*DataTable************************************************************************@
	<link rel="stylesheet" href="~/datatable/css/bootstrap.css" />
	<link rel="stylesheet" href="~/datatable/css/dataTables.bootstrap4.min.css" />
	<link rel="stylesheet" href="~/datatable/css/responsive.bootstrap4.min.css" />
	@*************************************************************************************@

</head>
<body class="is-preload">
	<div style="width:100%; max-width: 100em; margin: 0 auto; padding: 0 1em;">
		<!-- Header -->
		<header id="header">
			<div class="inner">

				<!-- Logo -->
				<a href="#" class="logo">
					<span class="symbol"><img src="~/images/logo_login.jpg" alt="" /></span><span class="title">SuperTransp</span>
					<br />
					<span class="title">@ViewBag.EmployeeName</span>
				</a>
			</div>
			<!-- Nav -->
			<nav>
				<ul>
					<li><a href="#menu">Menu</a></li>
				</ul>
			</nav>
		</header>

		<!-- Menu -->
		<nav id="menu">
			<h2>Menu</h2>
			<ul>
				<li>@Html.ActionLink("Inicio", "Index", "Home")</li>
				<li>@Html.ActionLink("Salir", "Login", "Security")</li>
			</ul>
		</nav>

		<div id="main">
			<div class="inner">
				<!-- Form -->
				<section>
					<h4 style="color:#4cbece"> Seleccione una Línea</h4>
					<br />
					<table id="inventory" class="table table-striped table-bordered dt-responsive nowrap" style="width:100%">
						<thead>
							<tr>
								<th draggable="true">Nombre Línea</th>
								<th draggable="true">Nombre Transportista</th>
								<th draggable="true"># Socio</th>
								<th draggable="true">Estado</th>
								<th draggable="true">Estatus</th>
							</tr>
						</thead>
						<tbody>
							@foreach (var ptg in Model)
							{
								<tr>
									<td>
										@Html.ActionLink(@ptg.PTGCompleteName, "Add", "Supervision", new { publicTransportGroupId = ptg.PublicTransportGroupId, pTGCompleteName = ptg.PTGCompleteName, driverFullName = ptg.DriverFullName, partnerNumber = ptg.PartnerNumber, publicTransportGroupRif = ptg.PublicTransportGroupRif, driverIdentityDocument = ptg.DriverIdentityDocument, stateName = ptg.StateName, supervisionStatus = ptg.SupervisionStatus, driverId = ptg.DriverId})
									</td>
									<td>@ptg.DriverFullName</td>
									<td>@ptg.PartnerNumber</td>
									<td>@ptg.StateName</td>
										@{
										if (ptg.SupervisionStatus != null && ptg.SupervisionStatus == 1)
											{
												<td>Supervisado</td>
											}
											else
											{
												<td>Pendiente</td>																
											}
										}
								</tr>
							}
						</tbody>
					</table>
				</section>
			</div>
		</div>
	</div>

	<!-- Scripts -->
	<script src="~/assets/js/jquery.min.js"></script>
	<script src="~/assets/js/browser.min.js"></script>
	<script src="~/assets/js/breakpoints.min.js"></script>
	<script src="~/assets/js/util.js"></script>
	<script src="~/assets/js/main.js"></script>

	@*DataTable*******************************************@
	<script src="~/datatable/js/jquery-3.5.1.js"></script>
	<script src="~/datatable/js/jquery.dataTables.min.js"></script>
	<script src="~/datatable/js/dataTables.bootstrap4.js"></script>
	<script src="~/datatable/js/dataTables.responsive.min.js"></script>
	<script src="~/datatable/js/responsive.bootstrap4.min.js"></script>
	@{
		await Html.RenderPartialAsync("_ValidationScriptsPartial");
	}
	@***********************************************************@

	<script type="text/javascript">
		
		// Drag and Drop Columns
		document.addEventListener("DOMContentLoaded", function () {
			const table = document.getElementById("inventory");
			const headers = table.querySelectorAll("thead th");
			let draggedIndex = null;

			headers.forEach((header, index) => {
				header.addEventListener("dragstart", function (e) {
					draggedIndex = index;
					e.dataTransfer.setData("text/plain", index);
				});

				header.addEventListener("dragover", function (e) {
					e.preventDefault();
				});

				header.addEventListener("drop", function (e) {
					const targetIndex = index;
					if (draggedIndex !== null && draggedIndex !== targetIndex) {
						swapColumns(table, draggedIndex, targetIndex);
						draggedIndex = null;
					}
				});
			});

			function swapColumns(table, fromIndex, toIndex) {
				const rows = table.rows;

				for (let i = 0; i < rows.length; i++) {
					const cells = rows[i].cells;
					if (cells[fromIndex] && cells[toIndex]) {
						const temp = cells[fromIndex].innerHTML;
						cells[fromIndex].innerHTML = cells[toIndex].innerHTML;
						cells[toIndex].innerHTML = temp;
					}
				}
			}
		});

		$(document).ready(function () {

			$('#inventory').DataTable({
				"language": {
					"sProcessing":    "Procesando...",
					"sLengthMenu":    "Mostrar _MENU_ registros",
					"sZeroRecords":   "No se encontraron resultados",
					"sEmptyTable":    "Ningún dato disponible en esta tabla",
					"sInfo":          "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
					"sInfoEmpty":     "Mostrando registros del 0 al 0 de un total de 0 registros",
					"sInfoFiltered":  "(filtrado de un total de _MAX_ registros)",
					"sInfoPostFix":   "",
					"sSearch":        "Buscar:",
					"sUrl":           "",
					"sInfoThousands":  ",",
					"sLoadingRecords": "Cargando...",
					"oPaginate": {
						"sFirst":    "Primero",
						"sLast":    "Último",
						"sNext":    "Siguiente",
						"sPrevious": "Anterior"
					},
					"oAria": {
						"sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
						"sSortDescending": ": Activar para ordenar la columna de manera descendente"
					}
				}
			});
		});
	</script>
</body>
</html>